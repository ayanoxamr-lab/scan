<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMRChain Scan - Advanced Network Explorer</title>
    <!-- Fetch Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Fetch Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Candlestick Chart Adapter -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial/dist/chartjs-chart-financial.min.js"></script>

    <!-- Libp2p libraries for browser transport (WebRTC and WebSockets) and noise encryption -->
    <script src="https://cdn.jsdelivr.net/npm/libp2p@0.46.2/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-noise@9.0.4/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-webrtc@0.15.0/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@libp2p/websockets@10.0.4/dist/index.min.js"></script>

    <style>
        /* Enhanced Colors and General Styles */
        :root {
            --primary: #00f0ff;
            --primary-glow: rgba(0, 240, 255, 0.7);
            --secondary: #7b42f5;
            --secondary-glow: rgba(123, 66, 245, 0.7);
            --accent: #ff2d75;
            --accent-glow: rgba(255, 45, 117, 0.7);
            --dark: #0a0a1a;
            --darker: #050510;
            --light: #e0e0ff;
            --card-bg: rgba(16, 16, 40, 0.9);
            --card-bg-hover: rgba(16, 16, 40, 0.95);
            --card-border: rgba(64, 224, 208, 0.3);
            --card-border-hover: rgba(64, 224, 208, 0.6);
            --text: var(--light);
            --text-secondary: #b0b0ff;
            --error: #D32F2F;
            --success: #4CAF50;
            --warning: #FF9800;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --gradient-glow: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
            --gradient-accent: linear-gradient(135deg, var(--primary), var(--accent));
            --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-slow: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.4);
            --glow: 0 0 15px var(--primary-glow);
            --glow-strong: 0 0 25px var(--primary-glow);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Exo 2', sans-serif;
        }

        body {
            background-color: var(--darker);
            color: var(--text);
            background-image:
                radial-gradient(ellipse at 20% 20%, rgba(0, 240, 255, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(123, 66, 245, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at center, var(--dark) 0%, var(--darker) 70%);
            overflow-x: hidden;
        }

        /* Animated Background Effects */
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.02); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px var(--primary-glow); }
            50% { box-shadow: 0 0 20px var(--primary-glow); }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        @keyframes pageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes metalPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes energyPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2.5); opacity: 0; }
        }

        @keyframes energyFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes hologram {
            0% { transform: translateY(0) rotateX(0); }
            50% { transform: translateY(-10px) rotateX(5deg); }
            100% { transform: translateY(0) rotateX(0); }
        }

        @keyframes matrix {
            0% { background-position: 0 0; }
            100% { background-position: 0 1000px; }
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: relative;
        }

        /* Enhanced Top Navigation Bar */
        .top-nav {
            background: rgba(5, 5, 16, 0.95);
            backdrop-filter: blur(15px);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--card-border);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            z-index: 100;
            position: relative;
        }

        .top-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 26px;
            font-weight: 900;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            padding: 5px 10px;
            border-radius: 8px;
            transition: var(--transition);
            text-shadow: 0 0 10px var(--primary-glow);
        }

        .logo::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            background: var(--gradient-glow);
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .logo:hover::after {
            opacity: 0.3;
        }

        .logo:hover {
            transform: translateY(-2px);
            text-shadow: 0 0 15px var(--primary-glow);
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            padding: 8px 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient);
            transition: var(--transition);
        }

        .nav-links a.active {
            color: var(--primary);
            font-weight: 700;
            text-shadow: 0 0 10px var(--primary-glow);
        }

        .nav-links a.active::after {
            width: 100%;
        }

        .nav-links a:hover {
            color: var(--light);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--darker);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 10px var(--primary-glow);
        }

        .user-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }

        .user-avatar:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: var(--glow);
        }

        /* Enhanced NebulaMind Connect Button */
        .nebula-button {
            background: var(--gradient);
            color: var(--darker);
            border: none;
            border-radius: 30px;
            padding: 12px 20px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .nebula-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }

        .nebula-button:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .nebula-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover), var(--glow);
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 25px;
            overflow: hidden;
        }

        /* Enhanced Sidebar */
        .sidebar {
            width: 280px;
            background-color: rgba(10, 10, 26, 0.8);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--gradient);
            opacity: 0;
            transition: var(--transition);
        }

        .sidebar:hover::before {
            opacity: 1;
        }

        .sidebar:hover {
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .sidebar-item {
            padding: 14px 18px;
            margin-bottom: 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: var(--gradient);
            opacity: 0.1;
            transition: var(--transition);
        }

        .sidebar-item:hover {
            background-color: var(--card-bg);
            color: var(--light);
            transform: translateX(5px);
        }

        .sidebar-item:hover::before {
            width: 100%;
        }

        .sidebar-item.active {
            background: var(--gradient);
            color: var(--darker);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(123, 66, 245, 0.4);
            transform: translateX(5px);
        }

        .sidebar-item.active i {
            color: var(--darker);
        }

        .sidebar-item i {
            color: var(--primary);
            width: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .sidebar-item:hover i {
            transform: scale(1.2);
        }

        /* Center Content Area (Page Swapper) */
        .center-content {
            flex: 2;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Single Page Content */
        .page {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding-left: 5px; /* For scrollbar gap */
            animation: pageSlideIn 0.5s ease-out;
        }

        .page.active {
            display: block;
        }

        /* Enhanced Right Sidebar */
        .right-sidebar {
            width: 350px;
            background-color: rgba(10, 10, 26, 0.8);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .right-sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 3px;
            height: 100%;
            background: var(--gradient);
            opacity: 0;
            transition: var(--transition);
        }

        .right-sidebar:hover::before {
            opacity: 1;
        }

        .right-sidebar:hover {
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        /* Enhanced Block Cards */
        .block-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            margin-bottom: 16px;
            padding: 16px;
            border-left: 4px solid var(--primary);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .block-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .block-card:hover::before {
            opacity: 1;
        }

        .block-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border);
            box-shadow: var(--shadow-hover);
        }

        .block-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .block-number {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-weight: bold;
            font-size: 16px;
        }

        .block-txs {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .block-time {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 12px;
        }

        .metal-indicators {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 12px;
        }

        .metal-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .metal-value {
            color: var(--primary);
            font-weight: bold;
            font-size: 14px;
        }

        .metal-label {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .stability-section {
            margin-top: 12px;
        }

        .stability-label {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 4px;
        }

        .progress-bar {
            height: 6px;
            background-color: var(--card-border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 4px;
            position: relative;
        }

        .progress-value {
            height: 100%;
            background-color: var(--primary);
            transition: width 1s ease-in-out;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .progress-bar:hover::after {
            opacity: 1;
        }

        .stability-value {
            font-size: 12px;
            font-weight: bold;
        }

        /* Enhanced Metrics */
        h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 16px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50%;
            height: 2px;
            background: var(--gradient);
            transition: var(--transition);
        }

        h2:hover::after {
            width: 100%;
        }

        .metrics-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 24px;
        }

        .metric-card {
            width: 160px;
            padding: 16px;
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .metric-card:hover::before {
            opacity: 1;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-hover);
        }

        .metric-icon {
            color: var(--primary);
            font-size: 28px;
            margin-bottom: 12px;
            transition: var(--transition);
        }

        .metric-card:hover .metric-icon {
            transform: scale(1.1);
        }

        .metric-value {
            color: var(--primary);
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
            font-family: 'Orbitron', sans-serif;
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        /* Enhanced Currency Supply */
        .supply-cards {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .supply-card {
            flex: 1;
            padding: 16px;
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .supply-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .supply-card:hover::before {
            opacity: 1;
        }

        .supply-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .supply-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            font-family: 'Orbitron', sans-serif;
        }

        .supply-value {
            color: var(--text);
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 4px;
            font-family: 'Orbitron', sans-serif;
        }

        .supply-backing {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 12px;
        }

        /* Enhanced Metal Bars */
        .metal-bars {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            margin-bottom: 24px;
        }

        .metal-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: var(--transition);
        }

        .metal-bar-container:hover {
            transform: translateY(-5px);
        }

        .metal-bar {
            width: 60px;
            height: 200px;
            background-color: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--card-border);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .metal-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: var(--primary);
            border-radius: 0 0 12px 12px;
            transition: height 1s ease-in-out;
        }

        .metal-fill.pulsing {
            animation: metalPulse 1.5s ease-in-out;
        }

        .minted-indicator {
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px;
            background-color: var(--secondary);
            border-radius: 8px;
            font-size: 10px;
            font-weight: bold;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .burned-indicator {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px;
            background-color: var(--error);
            border-radius: 8px;
            font-size: 10px;
            font-weight: bold;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .metal-name {
            color: var(--text-secondary);
            font-weight: bold;
            margin-top: 8px;
        }

        .metal-reserve {
            color: var(--primary);
            font-size: 14px;
            font-weight: bold;
        }

        /* Enhanced Smart Contracts */
        .contract-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            margin-bottom: 16px;
            padding: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .contract-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .contract-card:hover::before {
            opacity: 1;
        }

        .contract-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-hover);
        }

        .contract-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .contract-name {
            color: var(--primary);
            font-weight: bold;
            font-size: 16px;
        }

        .contract-calls {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .contract-address {
            color: var(--text-secondary);
            font-size: 12px;
            font-family: 'Courier New', monospace;
            margin-bottom: 12px;
            word-break: break-all;
        }

        /* Enhanced Spectral Gauges */
        .spectral-gauges {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            margin-bottom: 24px;
        }

        .gauge-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: var(--transition);
        }

        .gauge-container:hover {
            transform: translateY(-5px);
        }

        .gauge {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: var(--shadow);
        }

        .gauge::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--card-bg);
            z-index: 1;
        }

        .gauge-value {
            color: var(--primary);
            font-size: 20px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            position: relative;
            z-index: 3;
        }

        .gauge-inner-circle {
            width: 100px;
            height: 100px;
            background: var(--dark);
            border-radius: 50%;
            position: absolute;
            z-index: 2;
        }

        .gauge-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: bold;
            margin-top: 12px;
        }

        /* Enhanced Events Log */
        .events-log {
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            margin-bottom: 24px;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }

        .event-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            transition: var(--transition);
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-item:hover {
            background-color: var(--card-bg-hover);
        }

        .event-time {
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 600;
            width: 60px;
        }

        .event-text {
            color: var(--text);
            font-size: 14px;
            flex: 1;
        }

        /* Enhanced Quick Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 24px;
        }

        .action-button {
            padding: 14px 20px;
            background: var(--gradient);
            color: var(--darker);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }

        .action-button:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover), var(--glow);
        }

        /* Enhanced Treasury Charts */
        .treasury-chart {
            height: 250px;
            padding: 16px;
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            margin-top: 16px;
            box-shadow: var(--shadow);
        }

        /* Enhanced Placeholder View */
        .placeholder-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            padding: 32px;
            text-align: center;
        }

        .placeholder-icon {
            font-size: 64px;
            color: var(--primary);
            opacity: 0.3;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .placeholder-view:hover .placeholder-icon {
            opacity: 0.5;
            transform: scale(1.1);
        }

        .placeholder-title {
            color: var(--primary);
            font-size: 24px;
            font-weight: 800;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 12px;
        }

        .placeholder-desc {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 30px;
        }

        /* Enhanced Right Sidebar Components */
        .chat-toggle {
            background: var(--gradient);
            color: var(--darker);
            border: none;
            border-radius: 30px;
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: auto;
            font-weight: 700;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .chat-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }

        .chat-toggle:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .chat-toggle:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover), var(--glow);
        }

        .network-status {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .network-status:hover {
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .status-title {
            color: var(--primary);
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            font-family: 'Orbitron', sans-serif;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .status-label {
            color: var(--text-secondary);
        }

        .status-value {
            color: var(--text);
            font-weight: 500;
        }

        /* Enhanced Token Table Styles */
        .table-container {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            overflow-x: auto;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .table-container:hover {
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        #tokens-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        #tokens-table th,
        #tokens-table td {
            padding: 14px 18px;
            text-align: left;
            border-bottom: 1px solid var(--card-border);
            font-size: 14px;
            transition: var(--transition);
        }

        #tokens-table th {
            background-color: rgba(5, 5, 16, 0.9);
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
        }

        #tokens-table tbody tr {
            transition: var(--transition);
        }

        #tokens-table tbody tr:hover {
            background-color: var(--card-bg-hover);
        }

        #tokens-table td:last-child {
            font-family: 'Courier New', monospace;
            color: var(--accent);
            font-size: 13px;
        }

        #tokens-table td:first-child {
            color: var(--light);
            font-weight: 600;
        }

        /* Enhanced Metal Details */
        .metal-detail-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .metal-detail-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .metal-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--card-border);
        }

        .metal-detail-name {
            color: var(--primary);
            font-size: 18px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }

        .metal-detail-price {
            color: var(--text);
            font-size: 14px;
        }

        .metal-detail-body {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .metal-detail-body > div {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px dashed var(--card-border);
        }

        .metal-detail-history {
            grid-column: 1 / -1;
            margin-top: 12px;
        }

        .metal-detail-history ul {
            list-style-type: none;
            margin-top: 8px;
        }

        .metal-detail-history li {
            padding: 4px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Enhanced Wallet Card */
        .wallet-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .wallet-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .wallet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .wallet-address {
            color: var(--primary);
            font-family: 'Courier New', monospace;
            font-weight: bold;
            word-break: break-all;
        }

        .wallet-role {
            background: var(--gradient);
            color: var(--darker);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
            margin-left: 10px;
        }

        .wallet-mix {
            margin-bottom: 12px;
        }

        .mix-bar {
            height: 8px;
            background-color: var(--card-border);
            border-radius: 4px;
            margin-bottom: 4px;
            overflow: hidden;
        }

        .mix-fill {
            height: 100%;
            transition: width 0.5s ease-in-out;
        }

        .mix-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .wallet-activity {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 12px;
        }

        .wallet-chart {
            height: 60px;
        }

        /* Enhanced Search Bar */
        .search-section {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        #smart-search-input {
            flex: 1;
            padding: 14px 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 30px;
            color: var(--text);
            font-size: 16px;
            transition: var(--transition);
        }

        #smart-search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--primary-glow);
        }

        #smart-search-btn {
            padding: 14px 24px;
        }

        /* Enhanced Additional Info */
        .spectral-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .spectral-info > div {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 12px;
            border: 1px solid var(--card-border);
            text-align: center;
        }

        .spectral-info strong {
            color: var(--primary);
            display: block;
            margin-bottom: 4px;
        }

        /* NebulaMind Analysis Modal */
        .nebula-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(5, 5, 16, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .nebula-modal.active {
            display: flex;
            animation: pageSlideIn 0.3s ease-out;
        }

        .nebula-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--card-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .nebula-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .nebula-close:hover {
            color: var(--primary);
        }

        .nebula-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .nebula-analysis {
            color: var(--text);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .nebula-recommendation {
            background: rgba(0, 240, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid var(--primary);
        }

        .nebula-recommendation strong {
            color: var(--primary);
            display: block;
            margin-bottom: 8px;
        }

        /* ----------- Market Overview ----------- */
        .market-overview {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .market-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .market-stat-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .market-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .market-stat-card:hover::before {
            opacity: 1;
        }

        .market-stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .market-stat-title {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 8px;
        }

        .market-stat-value {
            color: var(--primary);
            font-size: 24px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }

        .market-stat-change {
            font-size: 14px;
            margin-top: 4px;
        }

        .market-stat-change.positive {
            color: var(--success);
        }

        .market-stat-change.negative {
            color: var(--error);
        }

        .chart-container {
            grid-column: 1 / -1;
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            height: 300px;
            margin-bottom: 24px;
        }

        .order-book {
            grid-column: 1 / -1;
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            margin-bottom: 24px;
        }

        .order-book-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            margin-bottom: 16px;
            text-align: center;
        }

        .order-book-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .order-book-side {
            display: flex;
            flex-direction: column;
        }

        .order-book-side-title {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 12px;
            text-align: center;
        }

        .order-book-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .order-book-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background-color: rgba(16, 16, 40, 0.5);
            border-radius: 8px;
            transition: var(--transition);
        }

        .order-book-item:hover {
            background-color: rgba(16, 16, 40, 0.8);
        }

        .order-book-price {
            color: var(--text);
            font-weight: bold;
        }

        .order-book-amount {
            color: var(--text-secondary);
        }

        .order-book-item.buy {
            border-left: 3px solid var(--success);
        }

        .order-book-item.sell {
            border-left: 3px solid var(--error);
        }

        /* ----------- Whale Watch ----------- */
        .whale-watch {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            margin-bottom: 24px;
        }

        .whale-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .whale-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            padding: 12px 16px;
            background-color: rgba(16, 16, 40, 0.5);
            border-radius: 12px;
            transition: var(--transition);
        }

        .whale-item:hover {
            background-color: rgba(16, 16, 40, 0.8);
            transform: translateY(-2px);
        }

        .whale-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .whale-rank {
            color: var(--primary);
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            width: 24px;
            text-align: center;
        }

        .whale-address {
            color: var(--text);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            word-break: break-all;
        }

        .whale-balance {
            color: var(--primary);
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            margin: 5px 10px;
        }

        .whale-percentage {
            color: var(--text-secondary);
            font-size: 12px;
            margin: 5px 10px;
        }

        .whale-activity {
            display: flex;
            gap: 8px;
            margin: 5px 0;
        }

        .whale-transaction {
            background-color: rgba(0, 240, 255, 0.1);
            color: var(--primary);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
        }

        .whale-transaction.buy {
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }

        .whale-transaction.sell {
            background-color: rgba(211, 47, 47, 0.1);
            color: var(--error);
        }

        /* ----------- Comprehensive Design Enhancements ----------- */
        .holographic-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .holographic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .holographic-card:hover::before {
            opacity: 1;
        }

        .holographic-card:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover), var(--glow);
        }

        .holographic-header {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            margin-bottom: 16px;
            position: relative;
            display: inline-block;
        }

        .holographic-header::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50%;
            height: 2px;
            background: var(--gradient);
            transition: var(--transition);
        }

        .holographic-header:hover::after {
            width: 100%;
        }

        .matrix-bg {
            position: relative;
            overflow: hidden;
        }

        .matrix-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(transparent 70%, rgba(0, 240, 255, 0.1) 90%);
            background-size: 100% 4px;
            animation: matrix 20s linear infinite;
            opacity: 0.1;
            z-index: -1;
        }

        .advanced-chart {
            height: 300px;
            padding: 16px;
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            margin-top: 16px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .advanced-chart::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(0, 240, 255, 0.05), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .advanced-chart:hover::before {
            opacity: 1;
        }

        .node-map {
            height: 300px;
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            margin-top: 16px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-map::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 30%, rgba(0, 240, 255, 0.1) 70%);
            opacity: 0.3;
        }

        .node {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--primary);
            position: absolute;
            box-shadow: 0 0 10px var(--primary-glow);
            animation: energyPulse 2s infinite;
        }

        .node.leader {
            background-color: var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
            width: 15px;
            height: 15px;
        }

        .node.validator {
            background-color: var(--secondary);
            box-shadow: 0 0 10px var(--secondary-glow);
        }

        .connection {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            transform-origin: 0 0;
            opacity: 0.3;
        }

        /* Enhancements for Different Pages */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .network-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .stats-panel {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .stats-panel:hover {
            transform: translateY(-5px);
            border-color: var(--card-border-hover);
            box-shadow: var(--shadow-hover);
        }

        .stats-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            margin-bottom: 16px;
        }

        .stats-value {
            color: var(--text);
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
            font-family: 'Orbitron', sans-serif;
        }

        .stats-change {
            font-size: 14px;
        }

        .stats-change.positive {
            color: var(--success);
        }

        .stats-change.negative {
            color: var(--error);
        }

        /* Additional Design Enhancements */
        .glow-text {
            text-shadow: 0 0 10px var(--primary-glow);
        }

        .advanced-progress {
            height: 8px;
            background-color: var(--card-border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
            position: relative;
        }

        .advanced-progress-value {
            height: 100%;
            background: var(--gradient);
            transition: width 1s ease-in-out;
            position: relative;
            overflow: hidden;
        }

        .advanced-progress-value::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        .hologram-effect {
            animation: hologram 5s ease-in-out infinite;
        }

        /* Sidebar Enhancements */
        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-section-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--card-border);
        }

        /* Button Enhancements */
        .btn-primary {
            background: var(--gradient);
            color: var(--darker);
            border: none;
            border-radius: 30px;
            padding: 12px 20px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }

        .btn-primary:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover), var(--glow);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            border-radius: 30px;
            padding: 12px 20px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(0, 240, 255, 0.1), transparent);
            transform: translateX(-100%);
        }

        .btn-secondary:hover::before {
            animation: shimmer 1.5s infinite;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover), 0 0 15px rgba(0, 240, 255, 0.3);
            background: rgba(0, 240, 255, 0.1);
        }

        /* Responsive Enhancements */
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
                overflow: visible;
            }
            .sidebar,
            .right-sidebar {
                width: 100%;
            }
            .center-content {
                order: 2;
                overflow: visible;
            }
            .right-sidebar {
                order: 1;
            }
            .sidebar {
                order: 0;
            }
            .market-overview {
                grid-template-columns: 1fr;
            }
            .dashboard-grid,
            .analytics-grid,
            .network-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .supply-cards {
                flex-direction: column;
            }
            .metrics-grid {
                justify-content: center;
            }
            .nav-links {
                display: none;
            }
            .metal-detail-body {
                grid-template-columns: 1fr;
            }
            .spectral-info {
                grid-template-columns: 1fr;
            }
            .market-stats {
                grid-template-columns: 1fr;
            }
            .order-book-content {
                grid-template-columns: 1fr;
            }
            .whale-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }
            .whale-activity {
                flex-wrap: wrap;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <!-- NebulaMind Analysis Modal -->
    <div class="nebula-modal" id="nebula-modal">
        <div class="nebula-content">
            <button class="nebula-close" id="nebula-close">&times;</button>
            <h2 class="nebula-title">NebulaMind Analysis</h2>
            <div class="nebula-analysis" id="nebula-analysis">
                <!-- Analysis will be filled here -->
            </div>
            <div class="nebula-recommendation">
                <strong>Recommendation:</strong>
                <span id="nebula-recommendation"></span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Top Navigation Bar -->
        <div class="top-nav">
            <div class="logo">AMRScan</div>
            <div class="nav-links">
                <a href="#" class="active">Scan</a>
                <a href="#">Explore</a>
                <a href="#">Wallet</a>
                <a href="#">Governance</a>
                <a href="#">Settings</a>
            </div>
            <!-- NebulaMind Connect Button -->
            <button id="nebula-button" class="nebula-button">Connect NebulaMind</button>
            <div class="user-info">
                <div class="user-avatar">AM</div>
                <span>User_7b42f5</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-item active" data-page="dashboard-page">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="sidebar-item" data-page="blocks-page">
                    <i class="fas fa-cube"></i>
                    <span>Blocks</span>
                </div>
                <div class="sidebar-item" data-page="analytics-page">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </div>
                <div class="sidebar-item" data-page="contracts-page">
                    <i class="fas fa-file-code"></i>
                    <span>Native Contracts</span>
                </div>
                <!-- New EVM Page -->
                <div class="sidebar-item" data-page="evm-page">
                    <i class="fab fa-ethereum"></i>
                    <span>EVM Explorer</span>
                </div>
                 <!-- New Currencies Page -->
                <div class="sidebar-item" data-page="currencies-page">
                    <i class="fas fa-coins"></i>
                    <span>Tokens</span>
                </div>
                <!-- This page name was changed -->
                <div class="sidebar-item" data-page="metals-page">
                    <i class="fas fa-gem"></i>
                    <span>Metals</span>
                </div>
                <!-- Wallets Page -->
                <div class="sidebar-item" data-page="wallet-page">
                    <i class="fas fa-wallet"></i>
                    <span>Wallets</span>
                </div>
                <!-- New Market Watch Page -->
                <div class="sidebar-item" data-page="market-page">
                    <i class="fas fa-chart-bar"></i>
                    <span>Market Overview</span>
                </div>
                <!-- New Whale Watch Page -->
                <div class="sidebar-item" data-page="whale-page">
                    <i class="fas fa-fish"></i>
                    <span>Whale Watch</span>
                </div>
                <!-- Search Page -->
                <div class="sidebar-item" data-page="search-page">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </div>
                <div class="sidebar-item" data-page="network-page">
                    <i class="fas fa-users"></i>
                    <span>Network</span>
                </div>
                <div class="sidebar-item" data-page="settings-page">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>

            <!-- Center Content Area (Page Swapper) -->
            <div class="center-content">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page active">
                    <h2>Dashboard Overview</h2>
                    <div class="dashboard-grid">
                        <div class="stats-panel matrix-bg">
                            <div class="stats-title">Network Health</div>
                            <div class="stats-value">98.7%</div>
                            <div class="advanced-progress">
                                <div class="advanced-progress-value" style="width: 98.7%"></div>
                            </div>
                            <div class="stats-change positive">+0.3% from yesterday</div>
                        </div>
                        <div class="stats-panel matrix-bg">
                            <div class="stats-title">Transaction Volume</div>
                            <div class="stats-value">1.24M</div>
                            <div class="advanced-progress">
                                <div class="advanced-progress-value" style="width: 85%"></div>
                            </div>
                            <div class="stats-change positive">+12.4% from last week</div>
                        </div>
                    </div>
                    <div class="metrics-grid" id="dashboard-metrics"></div>
                    <div class="supply-cards" id="dashboard-supply"></div>
                    <div class="spectral-gauges" id="dashboard-spectral"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-bottom: 12px;">Recent Events</h3>
                    <div class="events-log" id="dashboard-events"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Quick Actions</h3>
                    <div class="action-buttons" id="dashboard-actions"></div>
                </div>

                <!-- Blocks Page -->
                <div id="blocks-page" class="page">
                    <h2>Blocks</h2>
                    <div id="blocks-container"></div>
                </div>

                <!-- Analytics Page -->
                <div id="analytics-page" class="page">
                    <h2>Analytics</h2>
                    <div class="analytics-grid">
                        <div class="holographic-card">
                            <div class="holographic-header">Network Performance</div>
                            <div class="advanced-chart">
                                <canvas id="performanceChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <div class="stats-panel matrix-bg">
                                <div class="stats-title">Avg Block Time</div>
                                <div class="stats-value">12.4s</div>
                                <div class="stats-change positive">-0.3s from target</div>
                            </div>
                            <div class="stats-panel matrix-bg">
                                <div class="stats-title">Gas Efficiency</div>
                                <div class="stats-value">94.2%</div>
                                <div class="advanced-progress">
                                    <div class="advanced-progress-value" style="width: 94.2%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="metrics-grid" id="analytics-metrics"></div>
                    <div class="supply-cards" id="analytics-supply"></div>
                    <div class="spectral-gauges" id="analytics-spectral"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Reserve History</h3>
                    <div class="treasury-chart">
                        <canvas id="analyticsChart"></canvas>
                    </div>
                </div>

                <!-- Native Contracts Page -->
                <div id="contracts-page" class="page">
                    <h2>Native Contracts</h2>
                    <div id="contracts-container"></div>
                </div>

                <!-- New EVM Page -->
                <div id="evm-page" class="page">
                    <h2>EVM Explorer</h2>
                    <div id="evm-contracts-container"></div>
                </div>

                <!-- New Currencies Page -->
                <div id="currencies-page" class="page">
                    <h2>Network Tokens</h2>
                    <div class="table-container">
                        <table id="tokens-table">
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Symbol</th>
                                    <th>Total Supply</th>
                                    <th>Holders</th>
                                    <th>Contract Address</th>
                                </tr>
                            </thead>
                            <tbody id="tokens-table-body">
                                <!-- Data will be filled by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Metals Page (formerly Tokens) -->
                <div id="metals-page" class="page">
                    <h2>Metals Layer</h2>
                    <div class="metal-bars" id="metals-bars-container"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Metals Details</h3>
                    <div id="metals-details-container"></div>
                </div>

                <!-- Wallets Page -->
                <div id="wallet-page" class="page">
                    <h2>Wallet Profiles</h2>
                    <div id="wallet-container"></div>
                </div>

                <!-- New Market Watch Page -->
                <div id="market-page" class="page">
                    <h2>Market Overview</h2>
                    <div class="market-overview">
                        <div class="market-stats">
                            <div class="market-stat-card">
                                <div class="market-stat-title">AMR Price</div>
                                <div class="market-stat-value">$32.84</div>
                                <div class="market-stat-change positive">+2.45%</div>
                            </div>
                            <div class="market-stat-card">
                                <div class="market-stat-title">24h Volume</div>
                                <div class="market-stat-value">$1.28M</div>
                                <div class="market-stat-change positive">+15.3%</div>
                            </div>
                            <div class="market-stat-card">
                                <div class="market-stat-title">Market Cap</div>
                                <div class="market-stat-value">$42.5M</div>
                                <div class="market-stat-change negative">-0.8%</div>
                            </div>
                            <div class="market-stat-card">
                                <div class="market-stat-title">Liquidity Strength</div>
                                <div class="market-stat-value">88%</div>
                                <div class="market-stat-change positive">+3.2%</div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="marketChart"></canvas>
                        </div>
                        <div class="order-book">
                            <div class="order-book-title">Order Book Depth</div>
                            <div class="order-book-content">
                                <div class="order-book-side">
                                    <div class="order-book-side-title">Buy Orders</div>
                                    <div class="order-book-list" id="buy-orders">
                                        <!-- Data will be filled here -->
                                    </div>
                                </div>
                                <div class="order-book-side">
                                    <div class="order-book-side-title">Sell Orders</div>
                                    <div class="order-book-list" id="sell-orders">
                                        <!-- Data will be filled here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- New Whale Watch Page -->
                <div id="whale-page" class="page">
                    <h2>Whale Watch</h2>
                    <div class="whale-watch">
                        <div class="whale-list" id="whale-list">
                            <!-- Data will be filled here -->
                        </div>
                    </div>
                </div>

                <!-- Smart Search Page -->
                <div id="search-page" class="page">
                    <h2>Smart Search</h2>
                    <div class="search-section">
                        <input id="smart-search-input" type="text" placeholder="Type your query here...">
                        <button id="smart-search-btn" class="action-button">Search</button>
                    </div>
                    <div id="search-results-container"></div>
                </div>

                <!-- Network Page -->
                <div id="network-page" class="page">
                    <h2>Network Overview</h2>
                    <div class="network-grid">
                        <div class="stats-panel matrix-bg">
                            <div class="stats-title">Active Nodes</div>
                            <div class="stats-value">1,248</div>
                            <div class="stats-change positive">+24 from last week</div>
                        </div>
                        <div class="stats-panel matrix-bg">
                            <div class="stats-title">Consensus Participation</div>
                            <div class="stats-value">96.3%</div>
                            <div class="advanced-progress">
                                <div class="advanced-progress-value" style="width: 96.3%"></div>
                            </div>
                        </div>
                        <div class="stats-panel matrix-bg">
                            <div class="stats-title">Network Uptime</div>
                            <div class="stats-value">99.98%</div>
                            <div class="stats-change positive">+0.02% from target</div>
                        </div>
                    </div>
                    <div class="node-map" id="node-map">
                        <!-- Node map will be generated here -->
                    </div>
                    <div class="metrics-grid" id="network-metrics"></div>
                    <div class="spectral-gauges" id="network-spectral"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-bottom: 12px;">Recent Events</h3>
                    <div class="events-log" id="network-events"></div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Quick Actions</h3>
                    <div class="action-buttons" id="network-actions"></div>
                </div>

                <!-- Settings Page -->
                <div id="settings-page" class="page">
                    <h2>Settings & Management</h2>
                    <div class="placeholder-view" id="settings-website">
                        <i class="fas fa-globe placeholder-icon"></i>
                        <div class="placeholder-title">My Websites</div>
                        <div class="placeholder-desc">Manage your deployed decentralized websites and domains here.</div>
                        <button class="action-button">
                            <i class="fas fa-globe"></i>
                            Explore My Websites
                        </button>
                    </div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Treasury Reserves</h3>
                    <div class="supply-card" id="settings-treasury-card">
                        <div class="supply-title" style="color: var(--primary);">Total Reserve Value</div>
                        <div class="supply-value">$1,320,450.00</div>
                        <div class="supply-backing">Backed by 150.5 Gold & 8,420.0 Silver</div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 100%; background: linear-gradient(90deg, var(--primary), var(--accent));"></div>
                        </div>
                        <div class="stability-value" style="color: var(--primary);">115.0% backed</div>
                    </div>
                    <h3 style="color: var(--primary); font-family: 'Orbitron', sans-serif; margin-top: 24px;">Reserve History (Last 30 Days)</h3>
                    <div class="treasury-chart">
                        <canvas id="settingsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <div class="network-status">
                    <div class="status-title">Network Status</div>
                    <div class="status-item">
                        <span class="status-label">Online Nodes</span>
                        <span class="status-value">1,248</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Block Height</span>
                        <span class="status-value">4,521</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Avg Block Time</span>
                        <span class="status-value">12.4s</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Network Health</span>
                        <span class="status-value" style="color: var(--primary);">98.7%</span>
                    </div>
                </div>
                <div class="network-status">
                    <div class="status-title">Metal Reserves</div>
                    <div class="status-item">
                        <span class="status-label">Lexereum</span>
                        <span class="status-value">500.0 oz</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Gold</span>
                        <span class="status-value">320.0 oz</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Crystal</span>
                        <span class="status-value">120.0 units</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Total Value</span>
                        <span class="status-value" style="color: var(--secondary);">$1.32M</span>
                    </div>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Quick Stats</div>
                    <div class="status-item">
                        <span class="status-label">Transactions Today</span>
                        <span class="status-value">12,458</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Gas Used</span>
                        <span class="status-value">4.2M</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">New Contracts</span>
                        <span class="status-value">18</span>
                    </div>
                </div>
                <button class="chat-toggle" id="chat-toggle">
                    <i class="fas fa-comment"></i>
                    Open Chat
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data and functions remain, with new enhancements
        // Block data
        let blocks = [
            { number: 4521, timestamp: new Date(Date.now() - 5 * 60 * 1000), txCount: 12, lexereumAmount: 41.2, goldAmount: 15.7, crystalAmount: 2.4, diamondAmount: 1.2, darkMatterAmount: 0.8, ionfluidAmount: 3.1, stabilityRatio: 98.4 },
            { number: 4520, timestamp: new Date(Date.now() - 15 * 60 * 1000), txCount: 8, lexereumAmount: 30.8, goldAmount: 11.3, crystalAmount: 1.9, diamondAmount: 0.9, darkMatterAmount: 0.6, ionfluidAmount: 2.5, stabilityRatio: 99.1 },
            { number: 4519, timestamp: new Date(Date.now() - 30 * 60 * 1000), txCount: 17, lexereumAmount: 55.6, goldAmount: 22.4, crystalAmount: 3.1, diamondAmount: 1.5, darkMatterAmount: 1.0, ionfluidAmount: 4.2, stabilityRatio: 97.9 },
            { number: 4518, timestamp: new Date(Date.now() - 60 * 60 * 1000), txCount: 6, lexereumAmount: 22.5, goldAmount: 8.9, crystalAmount: 1.2, diamondAmount: 0.6, darkMatterAmount: 0.4, ionfluidAmount: 1.8, stabilityRatio: 99.6 },
            { number: 4517, timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), txCount: 15, lexereumAmount: 48.7, goldAmount: 20.5, crystalAmount: 2.8, diamondAmount: 1.3, darkMatterAmount: 0.9, ionfluidAmount: 3.7, stabilityRatio: 98.7 }
        ];

        // General metrics data
        const metrics = [
            { label: 'TPS', value: '32', icon: 'fas fa-tachometer-alt' },
            { label: 'Gas Price', value: '0.00042 NVR', icon: 'fas fa-gas-pump' },
            { label: 'Gas Used', value: '4.2M', icon: 'fas fa-fire' },
            { label: 'Hashrate', value: '8.3 GH/s', icon: 'fas fa-microchip' },
            { label: 'Metal Index', value: '1.03', icon: 'fas fa-chart-line' }
        ];

        // Native smart contracts data
        const contracts = [
            { name: 'Liquidity Pool', address: 'amr_c_8af34c', calls: 132, energy: 0.87 },
            { name: 'DAO Voting', address: 'amr_c_3e28b1', calls: 98, energy: 0.92 },
            { name: 'Stable Coin Issuance', address: 'amr_c_ab1f12', calls: 76, energy: 0.78 }
        ];

        // New EVM contracts data
        const evmContracts = [
            { name: 'EVM Uniswap V2', address: '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D', calls: 1542, energy: 0.95 },
            { name: 'EVM AAVE Pool', address: '0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9', calls: 830, energy: 0.91 },
            { name: 'EVM Chainlink Oracle', address: '0x514910771AF9Ca656af840dff83E8264EcF986CA', calls: 3021, energy: 0.99 }
        ];

        // New token data
        const networkTokens = [
            { name: 'Test Token A', symbol: 'TTA', supply: '1,000,000', holders: 150, address: '0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984' },
            { name: 'Project Phoenix', symbol: 'PHX', supply: '100,000,000', holders: 2450, address: '0x3845badAde8e6dFF049820680d1F14bD3903a5d0' },
            { name: 'GovernanceShare', symbol: 'GOV', supply: '5,000,000', holders: 820, address: '0xc011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F' }
        ];

        // Recent events
        const events = [
            { time: '10:45', event: 'Contract 0x8af34c deployed' },
            { time: '10:30', event: 'Stable coin burn: 1,200 NVR' },
            { time: '09:50', event: 'Mining reward distribution' },
            { time: '09:20', event: 'New liquidity pool created' }
        ];

        // Metals data
        const metals = [
            { name: 'Lexereum', reserve: 500.0, minted: 20.0, burned: 5.0, color: '#FFD700' },
            { name: 'Gold', reserve: 320.0, minted: 15.0, burned: 3.0, color: '#FFA500' },
            { name: 'Crystal', reserve: 120.0, minted: 5.0, burned: 1.0, color: '#00FFFF' },
            { name: 'Diamond', reserve: 80.0, minted: 3.0, burned: 0.5, color: '#B9F2FF' },
            { name: 'Dark Matter', reserve: 25.0, minted: 1.0, burned: 0.2, color: '#4B0082' },
            { name: 'Ionfluid', reserve: 200.0, minted: 8.0, burned: 1.5, color: '#1E90FF' }
        ];


        // Additional details for each metal
        const metalsDetails = [
            {
                name: 'Lexereum',
                price: 1830.0,
                externalPrice: 1815.0,
                impactAMR: '+3%',
                impactNVR: '+5%',
                history: [
                    { date: '11/09/2025', event: 'Mined 25 oz' },
                    { date: '11/05/2025', event: 'Fused 10 oz' }
                ]
            },
            {
                name: 'Gold',
                price: 1830.0,
                externalPrice: 1815.0,
                impactAMR: '+3%',
                impactNVR: '+5%',
                history: [
                    { date: '11/09/2025', event: 'Mined 25 oz' },
                    { date: '11/05/2025', event: 'Fused 10 oz' }
                ]
            },
            {
                name: 'Crystal',
                price: 300.0,
                externalPrice: 295.0,
                impactAMR: '+0.5%',
                impactNVR: '+0.8%',
                history: [
                    { date: '11/07/2025', event: 'Mined 8 units' },
                    { date: '10/31/2025', event: 'Fused 2 units' }
                ]
            },
            {
                name: 'Diamond',
                price: 5000.0,
                externalPrice: 4950.0,
                impactAMR: '+1.2%',
                impactNVR: '+2.0%',
                history: [
                    { date: '11/06/2025', event: 'Mined 2 units' },
                    { date: '10/30/2025', event: 'Fused 0.5 units' }
                ]
            },
            {
                name: 'Dark Matter',
                price: 10000.0,
                externalPrice: 9800.0,
                impactAMR: '+2.5%',
                impactNVR: '+4.0%',
                history: [
                    { date: '11/05/2025', event: 'Mined 0.5 units' },
                    { date: '10/29/2025', event: 'Fused 0.1 units' }
                ]
            },
            {
                name: 'Ionfluid',
                price: 150.0,
                externalPrice: 148.0,
                impactAMR: '+0.3%',
                impactNVR: '+0.5%',
                history: [
                    { date: '11/08/2025', event: 'Mined 15 units' },
                    { date: '11/02/2025', event: 'Fused 5 units' }
                ]
            }
        ];

        // Sample wallet data
        const walletProfiles = [
            {
                address: 'amr_w_1f4a9a3',
                mix: { AMR: 60, NVR: 30, Metals: 10 },
                activity: 42,
                role: 'Validator',
                history: [100, 105, 98, 110, 120, 118, 130]
            },
            {
                address: 'amr_w_8b2d71c',
                mix: { AMR: 40, NVR: 45, Metals: 15 },
                activity: 18,
                role: 'Liquidity Provider',
                history: [200, 195, 210, 205, 215, 220, 230]
            },
            {
                address: 'amr_w_f5c955d',
                mix: { AMR: 25, NVR: 50, Metals: 25 },
                activity: 5,
                role: 'Miner',
                history: [50, 55, 53, 60, 58, 61, 65]
            }
        ];

        // Live values for periodic updates
        let liveMetrics = {
            blockHeight: blocks[0].number,
            tps: parseFloat(metrics[0].value),
            gasPrice: parseFloat(metrics[1].value),
            gasUsed: parseFloat(metrics[2].value),
            hashrate: parseFloat(metrics[3].value),
            metalIndex: parseFloat(metrics[4].value),
            nodes: 1248
        };

        // Spectral data
        const spectralData = [
            { label: 'Activity', value: 0.72, color: 'var(--primary)' },
            { label: 'Pressure', value: 0.44, color: 'var(--secondary)' },
            { label: 'Stability', value: 0.93, color: 'var(--primary)' }
        ];

        // Treasury data (mock)
        const treasuryData = [100.0, 102.5, 101.8, 105.0, 108.0, 110.0, 109.5, 115.0, 120.0, 118.0];

        // Market data (new)
        const marketData = {
            price: 32.84,
            change24h: 2.45,
            volume24h: 1280000,
            marketCap: 42500000,
            liquidityStrength: 88,
            orderBook: {
                buy: [
                    { price: 32.80, amount: 12500 },
                    { price: 32.75, amount: 8700 },
                    { price: 32.70, amount: 15400 },
                    { price: 32.65, amount: 9800 },
                    { price: 32.60, amount: 11200 }
                ],
                sell: [
                    { price: 32.85, amount: 9800 },
                    { price: 32.90, amount: 15400 },
                    { price: 32.95, amount: 8700 },
                    { price: 33.00, amount: 12500 },
                    { price: 33.05, amount: 11200 }
                ]
            }
        };

        // Whale data (new)
        const whaleData = [
            { rank: 1, address: 'amr_w_1f4a9a3', balance: 1250000, percentage: 12.5, recentTransactions: ['buy', 'buy', 'hold'] },
            { rank: 2, address: 'amr_w_8b2d71c', balance: 980000, percentage: 9.8, recentTransactions: ['sell', 'hold', 'buy'] },
            { rank: 3, address: 'amr_w_f5c955d', balance: 750000, percentage: 7.5, recentTransactions: ['buy', 'hold', 'hold'] },
            { rank: 4, address: 'amr_w_a3b4e2f', balance: 620000, percentage: 6.2, recentTransactions: ['sell', 'sell', 'hold'] },
            { rank: 5, address: 'amr_w_7c8d1a2', balance: 510000, percentage: 5.1, recentTransactions: ['buy', 'buy', 'sell'] }
        ];

        // Initialize after page load
        document.addEventListener('DOMContentLoaded', function() {
            // Bind sidebar elements
            initSidebarNavigation();
            // Bind chat button
            document.getElementById('chat-toggle').addEventListener('click', function() {
                // Use a custom modal instead of alert in a real app
                alert('Opening chat...');
            });
            // NebulaMind button
            const nebulaBtn = document.getElementById('nebula-button');
            if (nebulaBtn) nebulaBtn.addEventListener('click', connectNebulaMind);
            // NebulaMind close button
            const nebulaClose = document.getElementById('nebula-close');
            if (nebulaClose) nebulaClose.addEventListener('click', function() {
                document.getElementById('nebula-modal').classList.remove('active');
            });
            // Bind search button
            const searchBtn = document.getElementById('smart-search-btn');
            if (searchBtn) searchBtn.addEventListener('click', handleSearch);
            // Enable search on Enter keypress
            const searchInput = document.getElementById('smart-search-input');
            if (searchInput) searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleSearch();
            });
            // Start live updates
            startLiveUpdates();
            // Initialize the first page (dashboard)
            renderDashboard();
        });

        // Activate page navigation
        function initSidebarNavigation() {
            const items = document.querySelectorAll('.sidebar-item');
            items.forEach(item => {
                item.addEventListener('click', function() {
                    // Deactivate all items
                    items.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    // Hide all pages
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    // Show the target page
                    const target = this.getAttribute('data-page');
                    const targetPage = document.getElementById(target);
                    if (targetPage) {
                        targetPage.classList.add('active');
                    }
                    // Call the appropriate render functions for the page
                    switch (target) {
                        case 'dashboard-page':
                            renderDashboard();
                            break;
                        case 'blocks-page':
                            renderBlocks();
                            break;
                        case 'analytics-page':
                            renderAnalytics();
                            break;
                        case 'contracts-page':
                            renderContracts();
                            break;
                        case 'evm-page':
                            renderEvmContracts();
                            break;
                        case 'currencies-page':
                            renderNetworkTokens();
                            break;
                        case 'metals-page':
                            renderMetals();
                            renderMetalDetails();
                            break;
                        case 'wallet-page':
                            renderWallets();
                            break;
                        case 'market-page':
                            renderMarketOverview();
                            break;
                        case 'whale-page':
                            renderWhaleWatch();
                            break;
                        case 'search-page':
                            const input = document.getElementById('smart-search-input');
                            if (input) input.value = '';
                            const resultsContainer = document.getElementById('search-results-container');
                            if (resultsContainer) resultsContainer.innerHTML = '';
                            break;
                        case 'network-page':
                            renderNetwork();
                            renderNodeMap();
                            break;
                        case 'settings-page':
                            renderSettings();
                            break;
                    }
                });
            });
        }

        // Render functions with new enhancements
        // Render block cards
        function renderBlocks() {
            const container = document.getElementById('blocks-container');
            if (!container) return;
            container.innerHTML = '';
            blocks.forEach(block => {
                const blockElement = document.createElement('div');
                blockElement.className = 'block-card';
                const timeString = `${block.timestamp.getHours().toString().padStart(2, '0')}:${block.timestamp.getMinutes().toString().padStart(2, '0')}  ${(block.timestamp.getMonth() + 1).toString().padStart(2, '0')}/${block.timestamp.getDate().toString().padStart(2, '0')}/${block.timestamp.getFullYear()}`;
                const stabilityColor = block.stabilityRatio < 98 ? 'var(--error)' : 'var(--primary)';
                blockElement.innerHTML = `
                    <div class="block-header">
                        <div class="block-number">Block #${block.number}</div>
                        <div class="block-txs">${block.txCount} txs</div>
                    </div>
                    <div class="block-time">${timeString}</div>
                    <div class="metal-indicators">
                        <div class="metal-indicator">
                            <i class="fas fa-circle" style="color: #FFD700;"></i>
                            <span class="metal-value">${block.lexereumAmount.toFixed(1)}</span>
                            <span class="metal-label">Lexereum</span>
                        </div>
                        <div class="metal-indicator">
                            <i class="fas fa-circle" style="color: #FFA500;"></i>
                            <span class="metal-value">${block.goldAmount.toFixed(1)}</span>
                            <span class="metal-label">Gold</span>
                        </div>
                        <div class="metal-indicator">
                            <i class="fas fa-gem" style="color: #00FFFF;"></i>
                            <span class="metal-value">${block.crystalAmount.toFixed(1)}</span>
                            <span class="metal-label">Crystal</span>
                        </div>
                        <div class="metal-indicator">
                            <i class="fas fa-gem" style="color: #B9F2FF;"></i>
                            <span class="metal-value">${block.diamondAmount.toFixed(1)}</span>
                            <span class="metal-label">Diamond</span>
                        </div>
                        <div class="metal-indicator">
                            <i class="fas fa-star" style="color: #4B0082;"></i>
                            <span class="metal-value">${block.darkMatterAmount.toFixed(1)}</span>
                            <span class="metal-label">Dark Matter</span>
                        </div>
                        <div class="metal-indicator">
                            <i class="fas fa-tint" style="color: #1E90FF;"></i>
                            <span class="metal-value">${block.ionfluidAmount.toFixed(1)}</span>
                            <span class="metal-label">Ionfluid</span>
                        </div>
                    </div>
                    <div class="stability-section">
                        <div class="stability-label">Stability</div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: ${block.stabilityRatio}%; background-color: ${stabilityColor};"></div>
                        </div>
                        <div class="stability-value" style="color: ${stabilityColor};">${block.stabilityRatio.toFixed(1)}%</div>
                    </div>
                `;
                container.appendChild(blockElement);
            });
        }

        // Render metric cards
        function renderMetrics(containerId, metricsData) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            metricsData.forEach(metric => {
                const metricElement = document.createElement('div');
                metricElement.className = 'metric-card';
                metricElement.innerHTML = `
                    <div class="metric-icon">
                        <i class="${metric.icon}"></i>
                    </div>
                    <div class="metric-value">${metric.value}</div>
                    <div class="metric-label">${metric.label}</div>
                `;
                container.appendChild(metricElement);
            });
        }

        // Render supply cards
        function renderSupplyCards(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            // Stable coin
            const stableCard = document.createElement('div');
            stableCard.className = 'supply-card';
            stableCard.innerHTML = `
                <div class="supply-title" style="color: var(--primary);">Stable Coin Supply</div>
                <div class="supply-value">500,000 NVR</div>
                <div class="supply-backing">430,000 equivalent metals</div>
                <div class="progress-bar">
                    <div class="progress-value" style="width: 86%;"></div>
                </div>
                <div class="stability-value" style="color: var(--primary);">86.0% backed</div>
            `;
            container.appendChild(stableCard);
            // Base coin
            const baseCard = document.createElement('div');
            baseCard.className = 'supply-card';
            baseCard.innerHTML = `
                <div class="supply-title" style="color: var(--secondary);">Base Coin Supply</div>
                <div class="supply-value">1,200,000 AMR</div>
                <div class="supply-backing">850,000 equivalent metals</div>
                <div class="progress-bar">
                    <div class="progress-value" style="width: 71%; background-color: var(--secondary);"></div>
                </div>
                <div class="stability-value" style="color: var(--secondary);">71.0% backed</div>
            `;
            container.appendChild(baseCard);
        }

        // Render metal bars with pulsing effect
        function renderMetals() {
            const container = document.getElementById('metals-bars-container');
            if (!container) return;
            container.innerHTML = '';
            const maxReserve = Math.max(...metals.map(m => m.reserve));
            metals.forEach(metal => {
                const heightFactor = metal.reserve / maxReserve;
                const bar = document.createElement('div');
                bar.className = 'metal-bar-container';
                bar.innerHTML = `
                    <div class="metal-bar">
                        <div class="metal-fill pulsing" style="height: ${heightFactor * 100}%; background-color: ${metal.color};"></div>
                        <div class="minted-indicator">+${metal.minted.toFixed(1)}</div>
                        <div class="burned-indicator">-${metal.burned.toFixed(1)}</div>
                    </div>
                    <div class="metal-name">${metal.name}</div>
                    <div class="metal-reserve">${metal.reserve.toFixed(1)}</div>
                `;
                container.appendChild(bar);
            });
        }

        // Render smart contracts (native)
        function renderContracts() {
            const container = document.getElementById('contracts-container');
            if (!container) return;
            container.innerHTML = '';
            contracts.forEach(contract => {
                const card = document.createElement('div');
                card.className = 'contract-card';
                const energyColor = contract.energy < 0.6 ? 'var(--error)' : contract.energy < 0.8 ? 'var(--secondary)' : 'var(--primary)';
                card.innerHTML = `
                    <div class="contract-header">
                        <div class="contract-name">${contract.name}</div>
                        <div class="contract-calls">${contract.calls} calls</div>
                    </div>
                    <div class="contract-address">${contract.address}</div>
                    <div class="stability-section">
                        <div class="stability-label">Energy Index</div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: ${contract.energy * 100}%; background-color: ${energyColor};"></div>
                        </div>
                        <div class="stability-value" style="color: ${energyColor};">${(contract.energy * 100).toFixed(1)}%</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // New function: Render EVM contracts
        function renderEvmContracts() {
            const container = document.getElementById('evm-contracts-container');
            if (!container) return;
            container.innerHTML = '';
            evmContracts.forEach(contract => {
                const card = document.createElement('div');
                card.className = 'contract-card';
                const energyColor = contract.energy < 0.6 ? 'var(--error)' : contract.energy < 0.8 ? 'var(--secondary)' : 'var(--primary)';
                card.innerHTML = `
                    <div class="contract-header">
                        <div class="contract-name">${contract.name}</div>
                        <div class="contract-calls">${contract.calls} calls</div>
                    </div>
                    <div class="contract-address">${contract.address}</div>
                    <div class="stability-section">
                        <div class="stability-label">Gas Efficiency</div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: ${contract.energy * 100}%; background-color: ${energyColor};"></div>
                        </div>
                        <div class="stability-value" style="color: ${energyColor};">${(contract.energy * 100).toFixed(1)}%</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // New function: Render token table
        function renderNetworkTokens() {
            const tableBody = document.getElementById('tokens-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = '';
            networkTokens.forEach(token => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${token.name}</td>
                    <td>${token.symbol}</td>
                    <td>${token.supply}</td>
                    <td>${token.holders}</td>
                    <td>${token.address}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Render spectral gauges
        function renderSpectral(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            spectralData.forEach(data => {
                const gauge = document.createElement('div');
                gauge.className = 'gauge-container';
                gauge.innerHTML = `
                    <div class="gauge" style="background: conic-gradient(${data.color} 0% ${data.value * 100}%, var(--card-border) ${data.value * 100}% 100%);">
                        <div class="gauge-inner-circle"></div>
                        <div class="gauge-value">${(data.value * 100).toFixed(0)}%</div>
                    </div>
                    <div class="gauge-label">${data.label}</div>
                `;
                container.appendChild(gauge);
            });
        }

        // Render events log
        function renderEvents(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            events.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.className = 'event-item';
                eventElement.innerHTML = `
                    <div class="event-time">${event.time}</div>
                    <div class="event-text">${event.event}</div>
                `;
                container.appendChild(eventElement);
            });
        }

        // Render quick action buttons
        function renderActions(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            const actions = [
                { label: 'Analyse Contracts', icon: 'fas fa-microchip', callback: () => alert('Running contract analysis...') },
                { label: 'Refresh Metrics', icon: 'fas fa-sync', callback: () => alert('Refreshing network metrics...') },
                { label: 'Trigger Alert', icon: 'fas fa-bell', callback: () => alert('Test alert triggered!') },
            ];
            actions.forEach(action => {
                const btn = document.createElement('button');
                btn.className = 'action-button';
                btn.innerHTML = `<i class="${action.icon}"></i> ${action.label}`;
                btn.addEventListener('click', action.callback);
                container.appendChild(btn);
            });
        }

        // Render treasury chart
        function renderChart(canvasId) {
            const ctx = document.getElementById(canvasId);
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            // Destroy old chart if it exists
            if (Chart.getChart(ctx)) {
                Chart.getChart(ctx).destroy();
            }
            
            const chart = new Chart(context, {
                type: 'line',
                data: {
                    labels: Array.from({length: treasuryData.length}, (_, i) => `Day ${i+1}`),
                    datasets: [{
                        label: 'Reserve Value (in thousands)',
                        data: treasuryData,
                        borderColor: 'var(--primary)',
                        backgroundColor: 'rgba(0, 240, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        }
                    }
                }
            });
        }

        // ------------------ Page Renderers ------------------ //

        // Dashboard Page
        function renderDashboard() {
            renderMetrics('dashboard-metrics', metrics);
            renderSupplyCards('dashboard-supply');
            renderSpectral('dashboard-spectral');
            renderEvents('dashboard-events');
            renderActions('dashboard-actions');
        }

        // Analytics Page
        function renderAnalytics() {
            renderMetrics('analytics-metrics', metrics);
            renderSupplyCards('analytics-supply');
            renderSpectral('analytics-spectral');
            // Render chart
            renderChart('analyticsChart');
            // Render performance chart
            renderPerformanceChart();
        }

        // Network Page
        function renderNetwork() {
            renderMetrics('network-metrics', metrics);
            renderSpectral('network-spectral');
            renderEvents('network-events');
            renderActions('network-actions');
        }

        // Settings Page
        function renderSettings() {
            // Render treasury chart in settings
            renderChart('settingsChart');
        }

        // --------- Additional Features --------- //

        // Render enhanced metal details
        function renderMetalDetails() {
            const container = document.getElementById('metals-details-container');
            if (!container) return;
            container.innerHTML = '';
            metalsDetails.forEach(metal => {
                const card = document.createElement('div');
                card.className = 'metal-detail-card';
                const diff = metal.price - metal.externalPrice;
                const compare = diff >= 0 ? `+${diff.toFixed(2)}` : diff.toFixed(2);
                
                let historyHtml = '<ul>';
                metal.history.forEach(item => {
                    historyHtml += `<li>${item.date}: ${item.event}</li>`;
                });
                historyHtml += '</ul>';
                
                card.innerHTML = `
                    <div class="metal-detail-header">
                        <div class="metal-detail-name">${metal.name}</div>
                        <div class="metal-detail-price">Internal: ${metal.price.toFixed(2)} | External: ${metal.externalPrice.toFixed(2)}</div>
                    </div>
                    <div class="metal-detail-body">
                        <div><span>Impact on AMR:</span> <span style="color: var(--primary);">${metal.impactAMR}</span></div>
                        <div><span>Impact on NVR:</span> <span style="color: var(--primary);">${metal.impactNVR}</span></div>
                        <div><span>Network vs Market:</span> <span style="color: var(--primary);">${compare}</span></div>
                        <div class="metal-detail-history">
                            <div style="font-weight: bold; color: var(--primary); margin-bottom: 8px;">History:</div>
                            ${historyHtml}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Render enhanced wallet profiles
        function renderWallets() {
            const container = document.getElementById('wallet-container');
            if (!container) return;
            container.innerHTML = '';
            walletProfiles.forEach((wallet, idx) => {
                const card = document.createElement('div');
                card.className = 'wallet-card';
                card.innerHTML = `
                    <div class="wallet-header">
                        <div class="wallet-address">${wallet.address}</div>
                        <div class="wallet-role">${wallet.role}</div>
                    </div>
                    <div class="wallet-mix">
                        <div class="mix-bar"><div class="mix-fill" style="width: ${wallet.mix.AMR}%; background: var(--secondary);"></div></div>
                        <div class="mix-label"><span>AMR</span> <span>${wallet.mix.AMR}%</span></div>
                        <div class="mix-bar"><div class="mix-fill" style="width: ${wallet.mix.NVR}%; background: var(--primary);"></div></div>
                        <div class="mix-label"><span>NVR</span> <span>${wallet.mix.NVR}%</span></div>
                        <div class="mix-bar"><div class="mix-fill" style="width: ${wallet.mix.Metals}%; background: var(--accent);"></div></div>
                        <div class="mix-label"><span>Metals</span> <span>${wallet.mix.Metals}%</span></div>
                    </div>
                    <div class="wallet-activity">Activity (last 7 days): ${wallet.activity} interactions</div>
                    <div class="wallet-chart">
                        <canvas id="walletChart${idx}"></canvas>
                    </div>
                `;
                container.appendChild(card);
                // Render chart for each wallet
                const ctx = document.getElementById(`walletChart${idx}`);
                if (ctx) {
                    const context = ctx.getContext('2d');
                    if (Chart.getChart(ctx)) {
                        Chart.getChart(ctx).destroy();
                    }
                    new Chart(context, {
                        type: 'line',
                        data: {
                            labels: Array.from({ length: wallet.history.length }, (_, i) => `Day ${i+1}`),
                            datasets: [{
                                data: wallet.history,
                                borderColor: 'var(--primary)',
                                backgroundColor: 'rgba(0, 240, 255, 0.1)',
                                tension: 0.4,
                                fill: true,
                                pointRadius: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: {
                                    display: false,
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                x: {
                                    display: false,
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                }
            });
        }

        // Periodically update live values
        function startLiveUpdates() {
            setInterval(() => {
                // Update block height, node count, and TPS
                liveMetrics.blockHeight += 1;
                liveMetrics.tps = 28 + Math.random() * 10;
                liveMetrics.gasPrice = 0.0004 + Math.random() * 0.0002;
                liveMetrics.gasUsed = 4.0 + Math.random() * 0.5;
                liveMetrics.nodes += Math.floor(Math.random() * 5 - 2);
                
                // Update text values in the left sidebar
                const statusBoxes = document.querySelectorAll('.right-sidebar .network-status:first-of-type .status-item');
                if (statusBoxes.length >= 4) {
                    statusBoxes[0].querySelector('.status-value').textContent = liveMetrics.nodes;
                    statusBoxes[1].querySelector('.status-value').textContent = liveMetrics.blockHeight;
                    // Avg block time is static in this demo
                }
                
                // Update core metrics
                metrics[0].value = liveMetrics.tps.toFixed(0);
                metrics[1].value = liveMetrics.gasPrice.toFixed(5) + ' NVR';
                metrics[2].value = liveMetrics.gasUsed.toFixed(1) + 'M';
                metrics[3].value = (8.0 + Math.random()).toFixed(1) + ' GH/s';
                metrics[4].value = (1.0 + Math.random() * 0.1).toFixed(2);
                
                // If the active page is dashboard, analytics, or network, redraw it
                const activePage = document.querySelector('.page.active');
                if (activePage) {
                    const id = activePage.id;
                    if (id === 'dashboard-page') renderDashboard();
                    else if (id === 'analytics-page') renderAnalytics();
                    else if (id === 'network-page') renderNetwork();
                    else if (id === 'market-page') renderMarketOverview();
                    else if (id === 'whale-page') renderWhaleWatch();
                }
            }, 5000);
        }

        // NebulaMind engine for network analysis and recommendations
        function connectNebulaMind() {
            // Simple analysis based on current values
            const stability = spectralData.find(d => d.label === 'Stability').value;
            const pressure = spectralData.find(d => d.label === 'Pressure').value;
            const activity = spectralData.find(d => d.label === 'Activity').value;
            
            let analysis = '';
            let recommendation = '';
            
            // Comprehensive analysis
            if (stability > 0.9 && pressure < 0.5 && activity > 0.7) {
                analysis = 'The network is in an optimal state with high stability, low pressure, and healthy activity levels. All systems are functioning within expected parameters.';
                recommendation = 'Continue current operations. Consider exploring expansion opportunities as the network is stable and healthy.';
            } else if (pressure > 0.7) {
                analysis = 'High network pressure detected. Transaction volumes are approaching capacity limits, which may lead to increased gas fees and slower confirmations.';
                recommendation = 'Consider scaling solutions or temporary gas limit adjustments. Monitor closely for potential congestion issues.';
            } else if (stability < 0.8) {
                analysis = 'Network stability is below optimal levels. This may indicate issues with consensus or potential security concerns.';
                recommendation = 'Increase monitoring and consider running additional diagnostic checks. Review recent changes to the network configuration.';
            } else if (activity < 0.5) {
                analysis = 'Network activity is lower than expected. This may indicate reduced usage or potential connectivity issues with nodes.';
                recommendation = 'Investigate potential network partitions or consider incentives to increase network participation.';
            } else {
                analysis = 'The network is operating within normal parameters with minor fluctuations. No immediate action is required.';
                recommendation = 'Continue standard monitoring procedures. Consider running routine maintenance during low-activity periods.';
            }
            
            // Add additional details
            analysis += `<br><br><strong>Detailed Metrics:</strong><br>`;
            analysis += `- Stability Index: ${(stability * 100).toFixed(1)}%<br>`;
            analysis += `- Network Pressure: ${(pressure * 100).toFixed(1)}%<br>`;
            analysis += `- Activity Level: ${(activity * 100).toFixed(1)}%<br>`;
            analysis += `- Block Height: ${liveMetrics.blockHeight}<br>`;
            analysis += `- Online Nodes: ${liveMetrics.nodes}`;
            
            // Show the modal
            document.getElementById('nebula-analysis').innerHTML = analysis;
            document.getElementById('nebula-recommendation').textContent = recommendation;
            document.getElementById('nebula-modal').classList.add('active');
        }

        // Handle smart search
        function handleSearch() {
            const input = document.getElementById('smart-search-input');
            const query = input.value.trim();
            if (!query) return;
            const resultsContainer = document.getElementById('search-results-container');
            resultsContainer.innerHTML = '';
            // Analyze the query
            const lower = query.toLowerCase();
            if (lower.includes('whales') || lower.includes('whale')) {
                // Top AMR whales
                const whales = walletProfiles
                    .map(w => ({ address: w.address, holding: w.history[w.history.length - 1] }))
                    .sort((a, b) => b.holding - a.holding)
                    .slice(0, 10);
                const list = document.createElement('ul');
                whales.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.address}: ${item.holding} AMR`;
                    list.appendChild(li);
                });
                resultsContainer.appendChild(document.createElement('h4')).textContent = 'Top AMR Whales:';
                resultsContainer.appendChild(list);
            } else if (lower.includes('average') && lower.includes('nvr')) {
                // Average NVR price (mock value)
                const avgPrice = (1.0 + Math.random() * 0.2).toFixed(4);
                const p = document.createElement('p');
                p.textContent = `Average NVR price (last 24h): ${avgPrice} USD`;
                resultsContainer.appendChild(p);
            } else if (lower.includes('mining') && lower.includes('distribution')) {
                // Mining distribution (mock)
                const info = document.createElement('div');
                info.innerHTML = `<p>Mining distribution:</p><ul><li>North America: 35%</li><li>Europe: 25%</li><li>Asia: 30%</li><li>Other: 10%</li></ul>`;
                resultsContainer.appendChild(info);
            } else {
                const p = document.createElement('p');
                p.textContent = 'No results for this query.';
                resultsContainer.appendChild(p);
            }
        }

        // --------- New Functions --------- //

        // Render market overview
        function renderMarketOverview() {
            // Randomly update market data
            marketData.price = 32.84 + (Math.random() - 0.5) * 0.5;
            marketData.change24h = 2.45 + (Math.random() - 0.5) * 0.3;
            marketData.volume24h = 1280000 + (Math.random() - 0.5) * 100000;
            marketData.marketCap = 42500000 + (Math.random() - 0.5) * 500000;
            marketData.liquidityStrength = 88 + (Math.random() - 0.5) * 5;
            
            // Update market stats
            const marketStatValues = document.querySelectorAll('#market-page .market-stat-value');
            if (marketStatValues.length >= 4) {
                marketStatValues[0].textContent = `$${marketData.price.toFixed(2)}`;
                marketStatValues[1].textContent = `$${(marketData.volume24h / 1000000).toFixed(2)}M`;
                marketStatValues[2].textContent = `$${(marketData.marketCap / 1000000).toFixed(2)}M`;
                marketStatValues[3].textContent = `${marketData.liquidityStrength.toFixed(0)}%`;
            }

            // Update changes
            const changes = document.querySelectorAll('#market-page .market-stat-change');
            if(changes.length > 0) {
                changes[0].textContent = `${marketData.change24h >= 0 ? '+' : ''}${marketData.change24h.toFixed(2)}%`;
                changes[0].className = `market-stat-change ${marketData.change24h >= 0 ? 'positive' : 'negative'}`;
            }
            
            // Render market chart
            const ctx = document.getElementById('marketChart');
            if (!ctx) return;
            const context = ctx.getContext('2d');

            if (Chart.getChart(ctx)) {
                Chart.getChart(ctx).destroy();
            }
            
            // Mock candlestick data
            const candlestickData = [];
            let basePrice = marketData.price;
            let time = new Date().getTime();

            for (let i = 0; i < 50; i++) {
                const open = basePrice;
                const close = basePrice + (Math.random() - 0.5) * 2;
                const high = Math.max(open, close) + Math.random() * 1;
                const low = Math.min(open, close) - Math.random() * 1;
                
                candlestickData.push({
                    x: time,
                    o: open,
                    h: high,
                    l: low,
                    c: close
                });
                
                basePrice = close;
                time -= 3600000; // Subtract one hour
            }
            candlestickData.reverse(); // Show oldest first
            
            const chart = new Chart(context, {
                type: 'candlestick',
                data: {
                    datasets: [{
                        label: 'AMR/USD',
                        data: candlestickData,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        financial: {
                            color: {
                                up: 'var(--success)',
                                down: 'var(--error)',
                                unchanged: 'var(--text-secondary)',
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour'
                            },
                            ticks: { color: 'var(--text-secondary)' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            ticks: { color: 'var(--text-secondary)' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
            
            // Update order book
            const buyOrdersContainer = document.getElementById('buy-orders');
            const sellOrdersContainer = document.getElementById('sell-orders');
            
            if (buyOrdersContainer) buyOrdersContainer.innerHTML = '';
            if (sellOrdersContainer) sellOrdersContainer.innerHTML = '';
            
            marketData.orderBook.buy.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-book-item buy';
                orderElement.innerHTML = `
                    <div class="order-book-price">$${order.price.toFixed(2)}</div>
                    <div class="order-book-amount">${order.amount.toLocaleString()}</div>
                `;
                if (buyOrdersContainer) buyOrdersContainer.appendChild(orderElement);
            });
            
            marketData.orderBook.sell.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-book-item sell';
                orderElement.innerHTML = `
                    <div class="order-book-price">$${order.price.toFixed(2)}</div>
                    <div class="order-book-amount">${order.amount.toLocaleString()}</div>
                `;
                if (sellOrdersContainer) sellOrdersContainer.appendChild(orderElement);
            });
        }

        // Render whale watch
        function renderWhaleWatch() {
            const container = document.getElementById('whale-list');
            if (!container) return;
            container.innerHTML = '';
            
            whaleData.forEach(whale => {
                const whaleElement = document.createElement('div');
                whaleElement.className = 'whale-item';
                
                let transactionsHtml = '';
                whale.recentTransactions.forEach(transaction => {
                    let className = '';
                    let icon = '';
                    
                    if (transaction === 'buy') {
                        className = 'buy';
                        icon = 'fas fa-arrow-up';
                    } else if (transaction === 'sell') {
                        className = 'sell';
                        icon = 'fas fa-arrow-down';
                    } else {
                        className = 'hold';
                        icon = 'fas fa-minus';
                    }
                    
                    transactionsHtml += `<div class="whale-transaction ${className}"><i class="${icon}"></i></div>`;
                });
                
                whaleElement.innerHTML = `
                    <div class="whale-info">
                        <div class="whale-rank">#${whale.rank}</div>
                        <div class="whale-address">${whale.address}</div>
                    </div>
                    <div class="whale-balance">${(whale.balance / 1000000).toFixed(2)}M AMR</div>
                    <div class="whale-percentage">${whale.percentage}%</div>
                    <div class="whale-activity">
                        ${transactionsHtml}
                    </div>
                `;
                
                container.appendChild(whaleElement);
            });
        }

        // Render performance chart
        function renderPerformanceChart() {
            const ctx = document.getElementById('performanceChart');
            if (!ctx) return;
            const context = ctx.getContext('2d');
            
            if (Chart.getChart(ctx)) {
                Chart.getChart(ctx).destroy();
            }
            
            const performanceData = {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    {
                        label: 'TPS',
                        data: [25, 28, 30, 32, 31, 33, 35, 34, 36, 35, 37, 40],
                        borderColor: 'var(--primary)',
                        backgroundColor: 'rgba(0, 240, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Block Time (s)',
                        data: [14, 13.5, 13, 12.8, 12.5, 12.3, 12.1, 12, 11.9, 11.8, 11.7, 11.5],
                        borderColor: 'var(--secondary)',
                        backgroundColor: 'rgba(123, 66, 245, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            };
            
            const chart = new Chart(context, {
                type: 'line',
                data: performanceData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--text-secondary)'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        }
                    }
                }
            });
        }

        // Render node map
        function renderNodeMap() {
            const container = document.getElementById('node-map');
            if (!container) return;
            container.innerHTML = '';
            
            // Randomly generate nodes
            const nodes = [];
            const connections = [];
            
            // Create leader node
            const leaderNode = document.createElement('div');
            leaderNode.className = 'node leader';
            leaderNode.style.top = '50%';
            leaderNode.style.left = '50%';
            container.appendChild(leaderNode);
            nodes.push({ element: leaderNode, x: 50, y: 50, type: 'leader' });
            
            // Create random nodes
            for (let i = 0; i < 20; i++) {
                const node = document.createElement('div');
                const x = 10 + Math.random() * 80;
                const y = 10 + Math.random() * 80;
                const type = Math.random() > 0.7 ? 'validator' : 'normal';
                
                node.className = `node ${type}`;
                node.style.top = `${y}%`;
                node.style.left = `${x}%`;
                container.appendChild(node);
                
                nodes.push({ element: node, x, y, type });
                
                // Create connections to leader node
                if (Math.random() > 0.3) {
                    const connection = document.createElement('div');
                    connection.className = 'connection';
                    
                    const dx = x - 50;
                    const dy = y - 50;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    connection.style.width = `${length}%`;
                    connection.style.top = '50%';
                    connection.style.left = '50%';
                    connection.style.transform = `rotate(${angle}deg)`;
                    
                    container.appendChild(connection);
                    connections.push(connection);
                }
            }
            
            // Add pulse effect to nodes
            setInterval(() => {
                nodes.forEach(node => {
                    if (Math.random() > 0.7) {
                        node.element.style.animation = 'energyPulse 1s';
                        setTimeout(() => {
                            node.element.style.animation = '';
                        }, 1000);
                    }
                });
            }, 2000);
        }
    </script>

    <!-- Connect to Nebula/AMR node via libp2p and update block data dynamically -->
    <script type="module">
        import { createLibp2p } from 'https://cdn.jsdelivr.net/npm/libp2p@0.46.2/dist/esm/index.js';
        import { Noise } from 'https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-noise@9.0.4/dist/index.js';
        import { WebRTC } from 'https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-webrtc@0.15.0/dist/index.js';
        import { WebSockets } from 'https://cdn.jsdelivr.net/npm/@libp2p/websockets@10.0.4/dist/index.js';

        async function connectToNode() {
            try {
                // Initialize libp2p node with WebRTC and WebSockets transports
                const node = await createLibp2p({
                    transports: [new WebRTC(), new WebSockets()],
                    connectionEncryption: [() => new Noise()],
                });

                // Dial the remote peer using its multiaddress.  Adjust IP/port as needed.
                const remotePeerId = '12D3KooWHCpDEZjgSY3ckkc5LKv56sobApedDiveJGP7VyMxzGLc';
                const remoteAddr = `/ip4/84.247.129.253/tcp/30305/ws/p2p/${remotePeerId}`;
                await node.dial(remoteAddr);
                console.log('Connected to', remoteAddr);

                // Fetch scan data from the local server (ServeScanHTTP).  Use relative
                // path so the request goes to the same host/port as this page.
                const resp = await fetch('/scan_data');
                const data = await resp.json();
                if (data && data.blocks) {
                    // Map the returned block summaries to the format expected by
                    // the UI.  Some fields like lexereumAmount are not available in
                    // the summary, so we set them to zero.
                    blocks = data.blocks.map(b => ({
                        number: b.height,
                        timestamp: new Date(b.timestamp * 1000),
                        txCount: b.tx_count || b.txCount || 0,
                        lexereumAmount: 0,
                        goldAmount: 0,
                        crystalAmount: 0,
                        diamondAmount: 0,
                        darkMatterAmount: 0,
                        ionfluidAmount: 0,
                        stabilityRatio: 100,
                    }));
                    // Re-render the blocks section with the new data
                    if (typeof renderBlocks === 'function') {
                        renderBlocks();
                    }
                }
            } catch (err) {
                console.error('Failed to connect to node or fetch scan data:', err);
            }
        }

        // Call connectToNode after the page has finished loading and other
        // scripts have defined the render functions and global variables
        window.addEventListener('load', () => {
            connectToNode();
        });
    </script>
</body>
</html>
